<!-- Tab panes -->
<div role="tabpanel" class="tab-pane col-xs-12 active" id="List_Tags">
    <div class="row">
        <div class="col-xs-12 search-box mb-sm-large">
            <form id="frmLabelFilter" class="form-wrapper form-horizontal form-horizontal-type1 slide" role="form" ng-submit="viewLabels()">
                <div class="row">
                    <div class="col-md-6 col-lg-5">
                        <div class="form-group">
                            <label class="col-sm-4 control-label text-right">Project Name :</label>
                            <div class="col-sm-6 multi-level">
                                <ui-select ng-model="search.project"
                                           theme="bootstrap" ng-if="projects.length>0" class="last-child" ng-required="true">
                                    <ui-select-match placeholder="Select a project...">{{$select.selected.project_name}}</ui-select-match>
                                    <ui-select-choices repeat="project in projects | filter: $select.search"
                                                       refresh-delay="0">
                                        <div ng-bind-html="project.project_name" ng-click="updateSelectBox('projectlevels', project.id, 0, 0)"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <a href="/#/projects/create" ng-if="projects.length ==0">No project available. Create one.</a>
                                <span ng-if="!projects"><i class="fa fa-refresh"></i> Loading..</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-7">
                        <div class="form-group">
                            <label class="col-sm-4 col-lg-3 control-label text-right">Project Level :</label>
                            <div class="col-sm-8 col-lg-9 multi-level">
                                <ui-select ng-repeat="childlevels in projectlevels" ng-model="level[$index]"
                                           theme="bootstrap" class="{{((projectlevels.length - 1) === $index ? 'last-child ' : '')}}">
                                    <ui-select-match placeholder="Select a level...">{{$select.selected.level_name}}</ui-select-match>
                                    <ui-select-choices repeat="level in childlevels | filter: $select.search"
                                                       refresh-delay="0">
                                        <div ng-bind-html="level.level_name" ng-click="updateSelectBox('projectlevels', search.project_id, ($parent.$index + 1), level.id)"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <div ng-hide="projectlevels.length && search.project_id">
                                    <a ng-href="/#/projects/levels/{{search.project_id}}" ng-hide="(projectlevels.length && search.project_id) || !search.project_id">Click to manage project levels.</a>
                                    <span ng-hide="search.project_id">Select a project first</span>
                                </div>
                                <input type="hidden" ng-model="search.project_level_id" />
                            </div>
                        </div>
                    </div>
                </div><!--/row-->

                <div class="row">
                    <div class="col-md-6 col-lg-5">
                        <div class="form-group">
                            <label class="col-sm-4 control-label text-right">UID :</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" ng-model="search.uid" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-7">
                        <div class="form-group">
                            <label class="col-sm-4 col-lg-3 control-label text-right">User Group :</label>
                            <div class="col-sm-6 multi-level">
                                <ui-select ng-model="search.usergroup"
                                           theme="bootstrap" class="last-child">
                                    <ui-select-match placeholder="Select a group...">{{$select.selected.group_name}}</ui-select-match>
                                    <ui-select-choices repeat="usergroup in usergroups | filter: $select.search"
                                                       refresh-delay="0">
                                        <div ng-bind-html="usergroup.group_name"></div>
                                    </ui-select-choices>
                                    <a ng-href="/#/userGroups/project/{{search.project_id}}" ng-hide="(usergroups.length && search.project_id) || !search.project_id">Click to manage project levels.</a>
                                </ui-select>
                            </div>
                        </div>
                    </div>
                </div><!--/row-->

                <div class="row">
                    <div class="col-md-6 col-lg-5">
                        <div class="form-group">
                            <label class="col-sm-4 control-label text-right">Tag Name :</label>
                            <div class="col-sm-6">
                                <input type="text" ng-model="search.tag_name" class="form-control" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-7">
                        <div class="form-group">
                            <label class="col-sm-4 col-lg-3 control-label text-right">Item:</label>
                            <div class="col-sm-6 multi-level">
                                <ui-select ng-repeat="item in items"  ng-model="tag_item[$index].selected"
                                           theme="bootstrap" ng-disabled="disabled" class="{{((items.length - 1) === $index ? 'last-child ' : '')}}">
                                    <ui-select-match placeholder="Select item">{{$select.selected.item_name}}</ui-select-match>
                                    <ui-select-choices repeat="i in item | filter: $select.search"
                                                       refresh-delay="0">
                                        <div ng-bind-html="i.item_name" ng-click="updateSelectBox('items', search.project_id, $parent.$index, i.id)"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <div ng-hide="items.length">
                                    <a ng-href="/#/tagitems">No Item available.</a>
                                </div>
                                <input type="hidden" ng-model="search.tag_item_id" />
                            </div>
                        </div>
                    </div>
                </div><!--/row-->

                <div class="row">
                    <div class="col-md-6 col-lg-5">
                        <div class="form-group">
                            <label class="col-sm-4 control-label text-right">Product Code :</label>
                            <div class="col-sm-6">
                                <input type="text" ng-model="search.product_code" class="form-control" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-7">
                        <div class="form-group">
                            <label class="col-sm-4 col-lg-3 control-label text-right">Process Flow:</label>
                            <div class="col-sm-6 multi-level">
                                <ui-select ng-repeat="process in processes"  ng-model="tag_process[$index].selected"
                                           theme="bootstrap" ng-disabled="disabled" class="{{((processes.length - 1) === $index ? 'last-child ' : '')}}">
                                    <ui-select-match placeholder="Select process">{{$select.selected.process_name}}</ui-select-match>
                                    <ui-select-choices repeat="p in process | filter: $select.search"
                                                       refresh-delay="0">
                                        <div ng-bind-html="p.process_name" ng-click="updateSelectBox('processes', search.project_id, $parent.$index, p.id)"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <div ng-hide="processes.length">
                                    <a ng-href="/#/tag-process-flow">No process available.</a>
                                </div>
                                <input type="hidden" ng-model="search.tag_process_id" />
                            </div>
                        </div>
                    </div>
                </div><!--/row-->

                <div class="row">
                    <div class="col-md-6 col-lg-5">
                        <div class="form-group">
                            <label class="col-sm-4 control-label text-right">Tag Description :</label>
                            <div class="col-sm-6">
                                <input type="text" ng-model="search.tag_description" class="form-control" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-7">
                        <div class="form-group">
                            <label class="col-sm-4 col-lg-3 control-label text-right">Created Between :</label>
                            <div class="col-sm-3">
                                <div class="input-group">
                                    <input type="text" style="padding:6px 6px;" name="q" placeholder="From date..." class="form-control search-control" datepicker-popup="{{format}}" ng-model="search.date_range.from_date" is-open="datepickers.fromDate" max-date="today" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" close-text="Close">
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-primary search-btn" ng-click="openCalendar($event, 'fromDate')"><i class="fa fa-calendar"></i></button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="input-group">
                                    <input type="text" style="padding:6px 6px;" name="q" placeholder="To date..." class="form-control search-control" datepicker-popup="{{format}}" ng-model="search.date_range.to_date" is-open="datepickers.toDate" max-date="today" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" close-text="Close">
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-primary search-btn" ng-click="openCalendar($event, 'toDate')"><i class="fa fa-calendar"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!--/row-->

                <div class="row">
                    <div class="col-md-6 col-lg-5">
                        <div class="form-group">
                            <label class="col-sm-4 control-label text-right">Tag Type :</label>
                            <div class="col-sm-6">
                                <select class="form-control" ng-model="search.type">
                                    <option value="">-- Tag Type --</option>
                                    <option value="sT">Simple Tags (sT)</option>
                                    <option value="mT">Master Tags (mT)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-7">
                        <div class="form-group">
                            <label class="col-sm-4 col-lg-3 control-label text-right">Print Type:</label>
                            <div class="col-sm-8 multi-level">
                                <label class="mr-10"> <input type="radio" ng-model="print_type" value="nfc_code" /> NFC Code</label>
                                <label class="mr-10"> <input type="radio" ng-model="print_type" value="bar_code" /> Bar Code </label>
                                <label> <input type="radio" ng-model="print_type" value="qr_code" ng-init="print_type='qr_code'" /> QR Code </label>
                            </div>
                        </div>
                    </div>
                </div><!--/row-->
                
                <div class="alert alert-info">
                    <strong>Note: </strong> Please uncheck the below fields you don't want in printout on labels.
                </div>
                
                <div class="row-fluid">
                    <div class="col-xs-6 col-sm-6 col-md-4 col-lg-3">
                        <div class="form-group">
                            <label class="control-label">
                                Company Name:
                                <input type="checkbox" ng-model="checked.company_name" ng-init="checked.company_name=true">
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="control-label">
                                Project Name:
                                <input type="checkbox" ng-model="checked.project_name" ng-init="checked.project_name=true">      
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="control-label">
                                Item:
                                <input type="checkbox" ng-model="checked.tag_item" ng-init="checked.tag_item=true">
                        </div>

                    </div><!-- span4 end --> 

                    <div class="col-xs-6 col-sm-6 col-md-4 col-lg-3">

                        <div class="form-group">
                            <label class="control-label">
                                Client Name:
                                <input type="checkbox" ng-model="checked.client_name" ng-init="checked.client_name=true">
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="control-label">
                                Project Address:
                                <input type="checkbox"  ng-model="checked.project_address" ng-init="checked.project_address=true">
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="control-label">
                                Process:
                                <input type="checkbox" ng-model="checked.process" ng-init="checked.process=true">
                            </label>
                        </div>

                    </div><!-- span4 end -->

                    <div class="col-xs-6 col-sm-6 col-md-4 col-lg-3">

                        <div class="form-group">
                            <label class="control-label">
                                Client Location:
                                <input type="checkbox" ng-model="checked.client_location" ng-init="checked.client_location=true">
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="control-label">Area:
                                <input type="checkbox" ng-model="checked.project_location" ng-init="checked.project_location=true">
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="control-label">
                                Unique Code:
                                <input type="checkbox" ng-model="checked.uid" ng-init="checked.uid=true">
                            </label>
                        </div>

                    </div>

                    <div class="col-xs-6 col-sm-6 col-md-4 col-lg-3">

                        <div class="form-group">
                            <label class="control-label">
                                Main Contractor:
                                <input type="checkbox" ng-model="checked.main_contractor" ng-init="checked.main_contractor=true">
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="control-label">Project level:
                                <input type="checkbox" ng-model="checked.project_level" ng-init="checked.project_level=true">
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="control-label">Tag Description:
                                <input type="checkbox" ng-model="checked.tag_description" ng-init="checked.tag_description=true">
                            </label>
                        </div>

                    </div>
                </div>

                <div class="row mt-20">
                    <div class="col-sm-10 text-center">
                        <button class="btn btn-primary mb-sm-5" type="submit">View Labels</button>
                        <button class="btn btn-primary mb-sm-5" type="button" ng-click="clearFilter();">Clear Filter</button>
                    </div> 
                </div>
            </form>
            <div id="TaskContentBlock" class="row" ng-if="labels"><!-- .span12 -->
                <div class="col-sm-12">
                    <form class="search-box " role="form" ng-submit="printLabel()">
                        <div class="form-inline">
                            <div class="mt-10 mb-10 row">
                                <div class="col-sm-3  print-elm-left-xs mt-5">
                                    &nbsp;&nbsp;<i class="fa fa-list-alt fa-lg mr-10 mt-5"></i>
                                    <strong>List Of Tasks</strong>
                                </div>
                                <div class="col-sm-9 print-elm-right-xs text-right">
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" ng-change="checkAll(selectAll)" ng-model="selectAll" /> All 
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <select class="form-control" ng-model="print.label_template" 
                                             ng-options="template.template_name for template in templates">
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn btn-primary btn-xs" type="submit"><i class="fa fa-print"></i> Print Label</button>
                                    </div>
                                    <div class="form-group">
                                        <button ng-click="collapsed=!collapsed;" class="pull-right btn icon-btn btn-xs" type="button">
                                            <i ng-class="{'fa fa-sort-desc fa-2x': !collapsed,'fa fa-sort-asc fa-2x': collapsed}" class="fa fa-sort-desc fa-2x"></i>
                                        </button>                      
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="body slide" ng-hide="collapsed" id="actionTable">
                            <div class="row">
                                <div class="clearfix pl-20" ng-repeat="label in labels" style="border-bottom: 1px solid #ccc;">
                                    <div class="col-sm-4" ng-if="label.uid">
                                        <input type="checkbox" ng-model="label.isSelected" ng-change="checkLabel(label)">
                                        <strong>UID:</strong>{{label.uid}}
                                        <br><br>
                                        <img style='width: 15em' ng-src="/filemanager/getimage?type={{basePrintType[print_type]}}&file={{(print_type=='nfc_code'?'nfc':label.uid)}}.png"><br>
                                        <strong>&nbsp;&nbsp;&nbsp;&nbsp;{{print_type | titlecase}}</strong><br><br>
                                        <img width="150" height="20" alt="" src="/images/logo.png"><br>
                                        <strong>www.sitetrack-nfc.com</strong>  
                                    </div>
                                    <div class="col-sm-8 mt-15">
                                        <div>&nbsp;</div>
                                        <div ng-if="checked.company_name">
                                            <strong>Company Name: </strong>{{company.company_name}}
                                        </div>
                                        <div ng-if="checked.client_name">
                                            <strong>Client Name: </strong>{{search.project.client_name}}
                                        </div>
                                        <div ng-if="checked.client_location">
                                            <strong>Client Location: </strong>{{search.project.client_address}} {{search.project.client_city}}
                                        </div>
                                        <div ng-if="checked.main_contractor">
                                            <strong>Main Contractor: </strong>{{search.project.main_contractor}}
                                        </div>
                                        <div ng-if="checked.project_name">
                                            <strong>Project Name: </strong>{{search.project.project_name}}
                                        </div>
                                        <div ng-if="checked.project_location">
                                            <strong>Area: </strong>{{search.project.project_location}}
                                        </div>
                                        <div ng-if="checked.project_level">
                                            <strong>Project Level:</strong><span ng-repeat="project_level in label.project_level">
                                                {{project_level}} <strong ng-if="label.project_level.length !== ($index + 1)">&nbsp;>&nbsp;</strong>
                                            </span>
                                        </div>
                                        <div ng-if="checked.tag_item">
                                            <strong>Item: </strong><span ng-repeat="item in label.itemObj">
                                                {{item.item_name}} <strong ng-if="label.itemObj.length !== ($index + 1)">&nbsp;>&nbsp;</strong>
                                            </span>
                                        </div>
                                        <div ng-if="checked.process">
                                            <strong>Process: </strong><span ng-repeat="process in label.processObj">
                                                {{process.process_name}} <strong ng-if="label.processObj.length !== ($index + 1)">&nbsp;>&nbsp;</strong>
                                            </span>
                                        </div>
                                        <div ng-if="checked.tag_description">
                                            <strong>Task Summary: </strong>{{label.tag_description}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="pl-20" ng-if="!labels || labels.length==0">
                                No label available for your search
                            </div>
                        </div>
                    </form>       
                </div><!-- /label list container -->
            </div>
        </div><!--/search-tag-box-->
    </div><!--/row-->
</div><!--/tab-content-->
